class Shop
  def initialize
    @@display = Map.new(map:[
      [3,1,1,1,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,4],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,11],
      [7,1,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,8],
      [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11],
      [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11],
      [5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6]
    ], text_hash:{0 => "  ", 1 => "━━", 2 => "┃ ", 3 => "┏━", 4 => "━┓", 5 => "┗━", 6 => "━┛", 7 => "┃━", 8 =>"━┃", 9 => "  ", 10 => "  ", 11 => " ┃"})
    @@item_1 = Sprite.new(2, 1, "メガホン")
    @@item_2 = Sprite.new(2, 2, "学生服")
    @@money_1 = Sprite.new(13, 1, "320GOLD ")
    @@money_2 = Sprite.new(13, 2, "900GOLD ")
    @@cursol = Sprite.new(1, 1, "◎")
    @@expla = Sprite.new(1, 15, "拡声器　声量によるダメージ増加")
  end

  class << self
    def update
      system("cls")

      @@cursol.y += 1 if Key.down?(Key::DOWN) && @@cursol.y < 2
      @@cursol.y -= 1 if Key.down?(Key::UP) && @@cursol.y > 1

      @@expla.text = "拡声機　声量によるダメージ増加" if @@cursol.y == 1
      @@expla.text = "服　敵の攻撃をちょっとだけ防ぐ" if @@cursol.y == 2

      Scene.next(init: true) if Key.down?(Key::RETURN)
      Scene.back if Key.down?(Key::ESCAPE)
    end

    def draw
      @@display.draw([@@item_1, @@money_1, @@item_2, @@money_2, @@cursol, @@expla])
    end
  end
end
